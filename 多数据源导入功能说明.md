# 多数据源导入功能说明

## 功能概述

现在支持多数据源导入功能，每个导入的数据都会显示在独立的容器中，方便管理和查看。

## 主要特性

### 1. 独立数据源容器
- 每次导入数据都会创建一个新的数据源容器
- 容器显示为"数据1"、"数据2"等
- 每个数据源显示导入时间和包含的卡池/记录数量

### 2. 层级展示结构
```
已导入寻访记录
├── 数据1 (导入时间: 2024-01-01 10:00:00)
│   ├── 卡池类型1 (10条记录)
│   └── 卡池类型2 (5条记录)
├── 数据2 (导入时间: 2024-01-01 11:00:00)
│   ├── 卡池类型1 (8条记录)
│   └── 卡池类型3 (12条记录)
└── ...
```

### 3. 操作功能
- **展开/折叠**: 每个数据源和卡池都可以独立展开或折叠
- **删除数据源**: 可以单独删除某个数据源
- **合并数据**: 将所有数据源合并为一个（去重）
- **全部展开/折叠**: 一键展开或折叠所有数据源和卡池
- **清除数据**: 清除所有导入的数据源

### 4. 合并功能
- 当有2个或以上数据源时，显示"合并数据"按钮
- 合并时会按卡池类型进行分组
- 自动去除重复记录（基于角色名+时间戳）
- 合并后按时间倒序排列记录
- 合并结果会替换原有数据源

### 5. 兼容性
- 保持与原有导出功能的完全兼容
- 支持所有原有的导入格式（通用格式、新格式、旧格式）
- 原有的"合并导出"功能继续可用

## 使用流程

1. **导入第一个数据**
   - 点击"导入记录"
   - 选择文件
   - 创建"数据1"容器

2. **导入更多数据**
   - 再次点击"导入记录"
   - 选择另一个文件
   - 创建"数据2"容器

3. **查看和管理**
   - 点击数据源标题展开/折叠
   - 点击卡池标题查看详细记录
   - 使用"全部展开"查看所有内容

4. **合并数据**
   - 确保有多个数据源
   - 点击"合并数据"按钮
   - 系统自动去重并创建合并结果

## UI改进

### 新增样式
- 数据源容器：深灰色背景，清晰分隔
- 导入时间显示：小字体灰色文字
- 删除按钮：红色边框，悬停变红底
- 合并按钮：蓝色主题，突出显示

### 交互优化
- 悬停效果：标题悬停变色
- 平滑动画：展开/折叠过渡效果
- 响应式设计：适配不同屏幕尺寸

## 技术实现

### 数据结构
```typescript
interface ImportedDataSource {
  id: string;                    // 唯一标识
  name: string;                  // 显示名称（数据1、数据2...）
  importTime: string;            // 导入时间
  categories: Category[];        // 卡池列表
}
```

### 兼容性处理
- 使用计算属性保持对`importedData`的兼容
- 原有函数继续工作，无需修改其他组件
- 向后兼容所有现有功能

这个功能让用户可以更好地管理多个导入的数据源，方便对比和合并不同时间段的抽卡记录。